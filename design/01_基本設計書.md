# 中学生社会科学習アプリ 基本設計書

## 1. アプリ概要

### アプリ名
**ソーシャルスタディAI**

### コンセプト
塾に代わる中学生向け社会科学習アプリ。AI技術を活用してパーソナライズされた学習体験を提供し、歴史・地理・公民の3分野を包括的にカバーする。

### ターゲットユーザー
- 中学1年生〜3年生
- 社会科の成績向上を目指す学生
- 塾に通えない・通いたくない学生

## 2. 主要機能

### 2.1 学習機能
- **問題演習**: 歴史・地理・公民の3分野対応
- **AI解説**: 間違えた問題の詳細解説
- **学習履歴分析**: 弱点の可視化と個別最適化
- **進捗管理**: 学習時間・正答率の記録

### 2.2 パーソナライズ機能
- **適応的問題生成**: 学習状況に応じた難易度調整
- **弱点克服プログラム**: 苦手分野の集中学習
- **学習計画提案**: AI による最適な学習スケジュール

### 2.3 モチベーション機能
- **学習ストリーク**: 連続学習日数の記録
- **バッジシステム**: 達成度に応じた称号付与
- **レベルアップ**: 経験値による成長実感

## 3. 技術構成

### 3.1 開発環境
- **フロントエンド**: Flutter
- **バックエンド**: Firebase
- **AI API**: Google Gemini API
- **データベース**: Cloud Firestore
- **認証**: Firebase Authentication
- **ホスティング**: Firebase Hosting

### 3.2 主要ライブラリ
```yaml
dependencies:
  flutter: ^3.0.0
  firebase_core: ^2.0.0
  cloud_firestore: ^4.0.0
  firebase_auth: ^4.0.0
  google_generative_ai: ^0.2.0
  fl_chart: ^0.60.0
  cached_network_image: ^3.2.0
```

## 4. AI活用戦略

### 4.1 コスト効率化
- **事前生成**: 基本問題は事前にAI生成してFirestoreに保存
- **キャッシュ活用**: 解説や類似問題の再利用
- **バッチ処理**: 夜間一括処理でコスト削減
- **段階的利用**: 無料ユーザーには制限付きAI機能

### 4.2 AI機能の優先度
1. **高優先度**: 学習履歴分析、弱点診断
2. **中優先度**: 個別問題生成、解説生成
3. **低優先度**: 学習計画提案、質問応答

### 4.3 Prompt設計例
```
あなたは中学{grade}年生向けの{subject}の問題を作成する教師です。
以下の条件で4択問題を1問作成してください：

- 難易度: {difficulty}
- 分野: {category}
- 学習者の弱点: {weak_points}

出力形式:
問題: [問題文]
選択肢: [A, B, C, D]
正解: [A-Dのいずれか]
解説: [100文字以内の解説]
```

## 5. 収益モデル

### 5.1 無料プラン
- 1日10問まで
- 基本的な解説のみ
- 広告表示あり
- 学習履歴の基本分析

### 5.2 プレミアムプラン（月額500円）
- 無制限問題演習
- 詳細なAI解説
- 広告なし
- 高度な学習分析
- 個別学習計画

### 5.3 広告収入
- AdMob統合
- 問題間のインタースティシャル広告
- バナー広告（学習の邪魔にならない配置）

## 6. 画面構成

### 6.1 メイン画面
- ダッシュボード（学習進捗、今日の目標）
- 分野選択（歴史・地理・公民）
- 学習ストリーク表示

### 6.2 学習画面
- 問題表示
- 選択肢ボタン
- 解説表示
- 次の問題へのナビゲーション

### 6.3 分析画面
- 学習時間グラフ
- 分野別正答率
- 弱点分析
- 推奨学習内容

### 6.4 設定画面
- プロフィール編集
- 通知設定
- プレミアム購入
- ログアウト

## 7. 技術的課題と対策

### 7.1 AIコスト管理
- 使用量モニタリング機能の実装
- レート制限の設定
- エラーハンドリングの強化

### 7.2 データベース設計
- インデックス最適化
- クエリ効率化
- データ同期戦略

### 7.3 セキュリティ
- Firebase Security Rules設定
- ユーザーデータ保護
- 不正利用防止
